!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Posc=t():e.Posc=t()}(window,function(){return n={},__webpack_require__.m=r=[function(e,t,r){"use strict";r.r(t);var n=(HttpClient.prototype.get=function(e,t){return this.getRequest(e,t).then(function(e){return Object.assign({},JSON.parse(HttpClient.toLowerKey(e)))})},HttpClient.prototype.getRequest=function(i,o){return new Promise(function(e,t){var r=new XMLHttpRequest;if(r.onload=function(){200===this.status?e(this.response):t(new Error(this.statusText))},r.onerror=function(){t(new Error("XMLHttpRequest Error: "+this.statusText))},r.open("GET",i),null!=o)for(var n in o)r.setRequestHeader(n,o[n]);r.send()})},HttpClient.toLowerKey=function(e){return e.replace(/"([\w]+)":/g,function(e,t){return'"'+HttpClient.toFirstLowerCase(t)+'":'})},HttpClient.toFirstLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},HttpClient);function HttpClient(){}var i=(PolicyStore.prototype.getPolicy=function(e,t,r){return this._http.get(e+"?clientId="+t,{Authorization:"Bearer "+r})},PolicyStore);function PolicyStore(e){this._http=null!=e?e:new n}var o=(StateStore.prototype.set=function(e,t){return e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},StateStore.prototype.get=function(e){e=this._prefix+e;var t=this._store.getItem(e);return Promise.resolve(t)},StateStore.prototype.remove=function(e){e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},StateStore.prototype.getAllKeys=function(){for(var e=[],t=0;t<this._store.length;t++){var r=this._store.key(t);0===r.indexOf(this._prefix)&&e.push(r.substr(this._prefix.length))}return Promise.resolve(e)},StateStore);function StateStore(e){void 0===e&&(e={prefix:"posc.",store:sessionStorage}),this._prefix=e.prefix,this._store=e.store}var s=(PolicyManager.prototype.setToken=function(e){this._token=e},PolicyManager.prototype.removeToken=function(){this._token=null},PolicyManager.prototype.getPolicy=function(){var n=this,i="permision:"+this.settings.authority+":"+this.settings.clientId;return this.getPermssionEndpoint().then(function(r){return n.settings.stateStore.get(i).then(function(e){var t=null!=e?JSON.parse(e):null;return null!=t&&(new Date).getTime()<=t.created+1e3*t.expireIn?new Promise(function(e){e(t)}):n.settings.policyStore.getPolicy(r,n.settings.clientId,n._token).then(function(e){return e.created=(new Date).getTime(),n.settings.stateStore.set(i,JSON.stringify(e)),e})})})},PolicyManager.prototype.removePolicy=function(){var e="permision:"+this.settings.authority+":"+this.settings.clientId;this.settings.stateStore.remove(e)},PolicyManager.prototype.getPermssionEndpoint=function(){var t=this;return null!=this.settings.endpoints.permission?new Promise(function(e){return e(t.settings.endpoints.permission)}):this._http.get(this.settings.authority+"/"+this.settings.endpoints.discovery).then(function(e){return t.settings.endpoints.permission=e.permissionEndpoint,t.settings.endpoints.policy=e.policyEndpoint,e.permissionEndpoint})},PolicyManager);function PolicyManager(e){this._http=new n,this._defaultSettings={authority:void 0,requireHttpsMetadata:!0,endpoints:{discovery:".well-known/policy-configuration",permission:void 0,policy:void 0},policyStore:new i(this._http),stateStore:new o},this._loaded=!1,this.settings=Object.assign(this._defaultSettings,e)}r.d(t,"PolicyStore",function(){return i}),r.d(t,"StateStore",function(){return o}),r.d(t,"PolicyManager",function(){return s})}],__webpack_require__.c=n,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0);function __webpack_require__(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}var r,n});