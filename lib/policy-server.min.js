var Posc=function(r){var n={};function __webpack_require__(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}return __webpack_require__.m=r,__webpack_require__.c=n,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(t,e,r){"use strict";r.r(e);var n=(HttpClient.prototype.get=function(t,e){return this.getRequest(t,e).then(function(t){return Object.assign({},JSON.parse(HttpClient.toLowerKey(t)))})},HttpClient.prototype.getRequest=function(i,o){return new Promise(function(t,e){var r=new XMLHttpRequest;if(r.onload=function(){200===this.status?t(this.response):e(new Error(this.statusText))},r.onerror=function(){e(new Error("XMLHttpRequest Error: "+this.statusText))},r.open("GET",i),null!=o)for(var n in o)r.setRequestHeader(n,o[n]);r.send()})},HttpClient.toLowerKey=function(t){return t.replace(/"([\w]+)":/g,function(t,e){return'"'+HttpClient.toFirstLowerCase(e)+'":'})},HttpClient.toFirstLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},HttpClient);function HttpClient(){}var i=(PolicyStore.prototype.getPolicy=function(t,e,r){return this._http.get(t+"?clientId="+e,{Authorization:"Bearer "+r})},PolicyStore);function PolicyStore(t){this._http=null!=t?t:new n}var o=(StateStore.prototype.set=function(t,e){return t=this._prefix+t,this._store.setItem(t,e),Promise.resolve()},StateStore.prototype.get=function(t){t=this._prefix+t;var e=this._store.getItem(t);return Promise.resolve(e)},StateStore.prototype.remove=function(t){t=this._prefix+t;var e=this._store.getItem(t);return this._store.removeItem(t),Promise.resolve(e)},StateStore.prototype.getAllKeys=function(){for(var t=[],e=0;e<this._store.length;e++){var r=this._store.key(e);0===r.indexOf(this._prefix)&&t.push(r.substr(this._prefix.length))}return Promise.resolve(t)},StateStore);function StateStore(t){void 0===t&&(t={prefix:"posc.",store:sessionStorage}),this._prefix=t.prefix,this._store=t.store}var s=(PolicyManager.prototype.setToken=function(t){this._token=t},PolicyManager.prototype.removeToken=function(){this._token=null},PolicyManager.prototype.getPolicy=function(){var n=this,i="permision:"+this.settings.authority+":"+this.settings.clientId;return this.getPermssionEndpoint().then(function(r){return n.settings.stateStore.get(i).then(function(t){var e=null!=t?JSON.parse(t):null;return null!=e&&(new Date).getTime()<=e.created+1e3*e.expireIn?new Promise(function(t){t(e)}):n.settings.policyStore.getPolicy(r,n.settings.clientId,n._token).then(function(t){return t.created=(new Date).getTime(),n.settings.stateStore.set(i,JSON.stringify(t)),t})})})},PolicyManager.prototype.removePolicy=function(){var t="permision:"+this.settings.authority+":"+this.settings.clientId;this.settings.stateStore.remove(t)},PolicyManager.prototype.getPermssionEndpoint=function(){var e=this;return null!=this.settings.endpoints.permission?new Promise(function(t){return t(e.settings.endpoints.permission)}):this._http.get(this.settings.authority+"/"+this.settings.endpoints.discovery).then(function(t){return e.settings.endpoints.permission=t.permissionEndpoint,e.settings.endpoints.policy=t.policyEndpoint,t.permissionEndpoint})},PolicyManager);function PolicyManager(t){this._http=new n,this._defaultSettings={authority:void 0,requireHttpsMetadata:!0,endpoints:{discovery:".well-known/policy-configuration",permission:void 0,policy:void 0},policyStore:new i(this._http),stateStore:new o},this._loaded=!1,this.settings=Object.assign(this._defaultSettings,t)}r.d(e,"PolicyStore",function(){return i}),r.d(e,"StateStore",function(){return o}),r.d(e,"PolicyManager",function(){return s})}]);